# 6日目

3人で, ボタン-地図-グラフの間で受け渡すデータの形式を決定した. また概形についても話した.

澤野と二人で, グラフを担当することになり, 役割分担と, csvから読んで所定の形式のdatasetにすることを決めた. 形式も決めた.

line-chart-japan.htmlを自分で書いた. これで, 少ないデータだが, グラフを表示することはできた.

次は, 複数のグラフを重ねることと, ボタンによる処理で表示するグラフを変更する. 椋本の日本地図から選んだデータをもらってそれを処理する.

20:00ごろ

複数のcsvファイルを読むコードについて相談した.

line-chart-japan.htmlというファイルでは, データ数をちょっと増やして, ボタンクリックで表示する折れ線を変えたり, 複数グラフを表示することを目指している. 今それを書いている.

# 7日目

12/10 9:30

line-chart-japan-button2.htmlというファイルを作りました. 実行してみればわかりますが, これでは, ボタンを押すとスケールを含めて, 選んだボタンのグラフを表示, もう一度押すと非表示にします. 複数のグラフを表示できます. 次の目標は, 色をつけるなど, どの都市のグラフか判別すること. また, 作物も表示.

12/12 18:30

line-chartというディレクトリをmainブランチに作りました. line-charts.htmlというファイルでcsvデータ(11月の1週分のデータ)を読んで, 都市ごとに色分けして, ボタンもつけて, 表示も切り替えられるようにできています.(katori/line-charts.htmlも同じ内容です) 
今後は, 

作物を変えることにも対応(現状1作物固定).

gridを灰色にする.

マウスホバーなどをした時, 各色がどこの市場かわかるようにし, 値段と日もうまく表示, ボタンの色とも対応.

12/12 20:00

line-chart/line-charts.htmlを更新, gridを灰色にした.

新たな課題, 折れ線と目盛りの日付を一致させる.

12/12 21:20

line-chart/line-charts.htmlを更新. 

全部の都市を選択するボタンと, 全部の都市の選択を解除するボタンを作った.

欠損値を含むデータに対する処理を加えた. おそらく対応できるはず(プロットが1個しかない都市は, lineの仕様上プロットできない)

12/12 21:35

line-chart/line-charts.htmlを更新. 

データ点をプロットした. 散布図の要領.

12/13 1:15

line-chart/line-charts.htmlを更新. 

散布図プロットにより, 1個しかないのも点として表示できる.

日付に曜日も表示. プロット点にマウスを乗せるとその日付と価格が隣に出てくる(都市名は無理)

折れ線と目盛りの一致はいろんなサイトを渡り歩いたが原因がわからず, 対処法もわからない.(TAの方,教えてほしいです.)

# 8日目

7日目の内容も含みます.

line-chart/line-charts.htmlの日付の目盛りとグラフのプロットとを一致させた.(TAさんありがとうございます)

line-chart-foodディレクトリを作った. こちらは作物を選ぶと作物の値段推移(折れ線グラフ)を表示する. そこに入っているline-charts-food.htmlが書いているファイル.

とりあえず, 全ての作物のボタン, 10作物まで, さらにボタンが押されたら, Queueのように最初の作物を自動的に非表示.

価格推移ではなく, 何%安い, 高いなどにすべき. 作物ごとに価格は異なるので.


次のコミット(8日目)

表示は10作物までに制限する. それ以上になったら古いのを消して, 消した色で新しいのを表示. 他の色とデータの関係はそのままであるように1つ前のcommitから修正した. また, 10以下でも表示を消した時も, うまく対応するようにした. (連想配列に追加順序を覚えさせて, Queueの動作を実現するように直した)

12/14 23:30ごろ

日本地図と折れ線グラフを隣り合うようにした.
katori/city_copというディレクトリで上記の内容のコードを書いている. index-city.htmlというファイルに書いている. 今はボタンの色と形の工夫, ボタンとグラフの色の対応づけを行なっている. 

# 9日目

12/16 0:30ごろ

- ボタンの完成(ok)

- 日本地図に色をつける(県ごとにfill?, てか県をボタンにするのもあり? ->できるかなあ...?)(ok)

- 生産量によって円の大きさを変える. 大都市圏が集中してしまう問題(矢印とか伸ばすのが現実的)(ok)

の3つを達成した. フォルダはkatori/city.

12/16 1:45ごろ

- データ数を増やした時の挙動のチェック(特にx軸のticks数, utcDayじゃダメそう) (ok)

を達成. mainブランチ/cityディレクトリにコードは入れてある.

12/17

地図と折れ線グラフのやつで, フロント側に入れた時の, ボタンの位置合わせ.

食べ物と折れ線グラフのやつでバグの修正と, 追加する機能について話し合った.(sawano/bubule_chart/index.html)このファイルは左にバブルチャート, 右に折れ線グラフを表示する.

新たにボタンを押して追加されたグラフにだけモーションをつけることの実装(katori/react_sample_copy/src/module/city.js)

https://qiita.com/7note/items/4d922ebd33dbefe99a89

ボタンにhoverするとグラフが光る. これで, 14個のボタンについて関数を作り, 

https://uxmilk.jp/11596

id取得(javasから), この関数でidのpathを光らせる. line_plot関数をもとにsvgに新たなpathを追加する(どうやって消す?)
か, 描画し直す(計算量的に大丈夫か, if文を使って特定の線だけ太くするとか)
マウスが外れた時は, また描画し直す? ->該当データだけ行う.いやでもそれremoveどうする?pathにidを定義して, それだけremove?


凡例付は, グラフの上に5 * 2をとって, svg, 位置を指定して, 色を塗ったcircleを配置し, queueの値(順序)に基づいて, 追加する. おそらく, svgは白にしておいて, queueで読んでいって, 色つけとtext書きを行う.
10個svgを作るか, 1個のsvgに書くか?


# 今後の予定・課題

- ボタンの完成(ok)

- 日本地図に色をつける(県ごとにfill?, てか県をボタンにするのもあり? ->できるかなあ...?)(ok)

- 生産量によって円の大きさを変える. 大都市圏が集中してしまう問題(矢印とか伸ばすのが現実的)(ok)

- ボタンを押したときのエフェクトをつける. javascriptからcssを編集できるようにする.

- 椋本側とのフォント(色など)の統一(ok)

- データ数を増やした時の挙動のチェック(特にx軸のticks数, utcDayじゃダメそう) (ok)

- 食べ物と折れ線の方で, 一番左を基準として何%上下したかで, 計算, おそらく新しくデータセットを作り直す(自分でやるか澤野に外注するか)(ok)

- バブルマップのボタンづけ(正直どうやっていいかわからない)と折れ線グラフ(ok)

- ボタンをホバーしたらグラフが光る.

- 選んだ作物の収量に応じてボタンの大きさが変化する.(javasからcssを制御(id取得))

- 作物によってどの地域では上昇傾向か下落傾向か判定する.

実際にシステムを作るとああすればよかったとか出てくる. あとこのデータと組み合わせてみたいとか...時間が足りん...

ぐぇ...終わらん...


